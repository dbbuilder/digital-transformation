<!DOCTYPE html>
<html>
<head>
    <title>Clearing Cache...</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="font-family: sans-serif; padding: 40px; text-align: center;">
    <h1>Clearing Browser Cache...</h1>
    <p id="status">Please wait...</p>

    <script>
        async function clearEverything() {
            const status = document.getElementById('status');

            try {
                // Clear service workers
                if ('serviceWorker' in navigator) {
                    const registrations = await navigator.serviceWorker.getRegistrations();
                    for (const registration of registrations) {
                        await registration.unregister();
                    }
                    status.innerHTML += '<br>✓ Service workers cleared';
                }

                // Clear caches
                if ('caches' in window) {
                    const cacheNames = await caches.keys();
                    for (const cacheName of cacheNames) {
                        await caches.delete(cacheName);
                    }
                    status.innerHTML += '<br>✓ Caches cleared';
                }

                // Clear localStorage
                localStorage.clear();
                status.innerHTML += '<br>✓ LocalStorage cleared';

                // Clear sessionStorage
                sessionStorage.clear();
                status.innerHTML += '<br>✓ SessionStorage cleared';

                status.innerHTML += '<br><br><strong>✅ All caches cleared!</strong>';
                status.innerHTML += '<br><br>Redirecting to home page in 2 seconds...';

                setTimeout(() => {
                    window.location.href = '/';
                }, 2000);

            } catch (error) {
                status.innerHTML = '❌ Error: ' + error.message;
                status.innerHTML += '<br><br><a href="/">Go to home page</a>';
            }
        }

        clearEverything();
    </script>
</body>
</html>
